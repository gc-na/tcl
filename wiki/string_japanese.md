<!--
Meta Description: # Tclの文字列操作: stringコマンドの完全ガイド ## 概要 Tclにおける`string`コマンドは、文字列の操作を行うための多様なサブコマンドを提供します。このコマンドは、文字列の比較、検索、変換、分割、結合など、さまざまな操作を簡単に実行できるように設計されています。 ## ドキュメ...
Meta Keywords: string, str, str1, index, str2
-->

# Tclの文字列操作: stringコマンドの完全ガイド

## 概要
Tclにおける`string`コマンドは、文字列の操作を行うための多様なサブコマンドを提供します。このコマンドは、文字列の比較、検索、変換、分割、結合など、さまざまな操作を簡単に実行できるように設計されています。

## ドキュメンテーション
`string`コマンドは、Tclスクリプト内で文字列を効果的に操作するための機能を集めたコマンドです。以下のサブコマンドが利用可能です。

### 使用法
- **`string compare`**: 2つの文字列を比較し、同じであれば0を、異なれば非ゼロを返します。
- **`string equal`**: 2つの文字列が等しいかどうかを判定します。
- **`string length`**: 文字列の長さを返します。
- **`string index`**: 指定されたインデックス位置の文字を返します。
- **`string range`**: 文字列の一部を取得します。
- **`string tolower` / `string toupper`**: 文字列を小文字または大文字に変換します。
- **`string trim`**: 文字列の前後から指定した文字を削除します。

### 詳細
各サブコマンドの詳細な情報は以下の通りです。

- `string compare str1 str2`: 
  - 2つの文字列`str1`と`str2`を比較し、同じであれば0を返します。異なる場合は、文字列の順序に基づいて負または正の値を返します。

- `string equal str1 str2`: 
  - 2つの文字列が完全に一致する場合に真を返します。このコマンドは、大文字と小文字を区別します。

- `string length str`: 
  - 入力の文字列`str`の長さ（文字数）を返します。空の文字列の場合は0を返します。

- `string index str index`: 
  - 文字列`str`内の指定された`index`位置にある文字を返します。インデックスは0から始まります。

- `string range str start end`: 
  - 文字列`str`の`start`から`end`までの部分文字列を返します。`end`は含まれます。

- `string tolower str`: 
  - 文字列`str`をすべて小文字に変換します。

- `string toupper str`: 
  - 文字列`str`をすべて大文字に変換します。

- `string trim str ?chars?`: 
  - 文字列`str`の前後から指定された文字`chars`を削除します。`chars`が省略された場合は、空白文字が削除されます。

## 例
以下は、`string`コマンドの基本的な使用例です。

```tcl
set str1 "Hello"
set str2 "World"

# 文字列の比較
puts [string compare $str1 $str2] ; # 出力: -1

# 文字列の長さ
puts [string length $str1] ; # 出力: 5

# 文字列の小文字変換
puts [string tolower $str1] ; # 出力: hello

# 文字列の一部分を取得
puts [string range $str1 1 3] ; # 出力: ell

# 文字列のトリム
set str3 "   Tcl   "
puts [string trim $str3] ; # 出力: Tcl
```

## 説明
`string`コマンドを使用する際の一般的な落とし穴や注意点について説明します。

- **文字列の比較**: `string compare`は、文字列の順序に基づいて返される値が異なることがあります。常に0または非ゼロの結果が返されることを理解しておくことが重要です。
- **インデックスの範囲**: `string index`を使用する際は、インデックスが有効な範囲内であることを確認してください。無効なインデックスを指定すると、エラーが発生します。
- **大文字と小文字**: `string equal`は大文字と小文字を区別するため、比較対象の文字列が同じであっても、大文字と小文字の違いで真偽が変わることがあります。

## 一文要約
Tclの`string`コマンドは、文字列の比較、操作、変換を簡単に行うための強力なツールです。