<!--
Meta Description: # Tclの「catch」コマンド：エラーハンドリングの基本 ## 概要 Tclの「catch」コマンドは、スクリプト内で発生する可能性のあるエラーをキャッチ（捕捉）し、エラーハンドリングを行うための強力なツールです。エラーが発生した際にスクリプトが異常終了するのを防ぎ、エラー情報を取得することがで...
Meta Keywords: catch, resultvar, result, errormsg, tclの
-->

# Tclの「catch」コマンド：エラーハンドリングの基本

## 概要
Tclの「catch」コマンドは、スクリプト内で発生する可能性のあるエラーをキャッチ（捕捉）し、エラーハンドリングを行うための強力なツールです。エラーが発生した際にスクリプトが異常終了するのを防ぎ、エラー情報を取得することができます。

## ドキュメンテーション
「catch」コマンドは、与えられたスクリプトを実行し、その結果を評価します。エラーが発生した場合、エラーメッセージを取得し、通常の処理に戻ることができます。これにより、エラー処理を実装し、プログラムの堅牢性を向上させることができます。

### 使用法
基本的な構文は以下の通りです：

```tcl
catch script ?resultVar?
```

- `script`: 実行するTclスクリプト。
- `resultVar`（オプション）: スクリプトの結果を格納する変数名。

### 戻り値
- 成功した場合、`catch`は0を返し、スクリプトの結果が`resultVar`に格納されます。
- エラーが発生した場合、1を返し、エラーメッセージが`resultVar`に格納されます。

## 例
以下に「catch」の基本的な使用例を示します。

### 例1: エラーキャッチの基本
```tcl
set result [catch {expr {1 / 0}} errorMsg]
if {$result != 0} {
    puts "エラーが発生しました: $errorMsg"
} else {
    puts "結果: $result"
}
```
この例では、ゼロ除算によりエラーが発生し、そのエラーメッセージが表示されます。

### 例2: 成功時の処理
```tcl
set result [catch {expr {2 + 2}} errorMsg]
if {$result == 0} {
    puts "計算結果: $errorMsg"
}
```
この例では、正常に計算が行われ、結果が表示されます。

## 説明
「catch」を使用する際の一般的な注意点：

- **エラーメッセージの取得**: エラーが発生した場合、`resultVar`にはエラーメッセージが格納されるため、後続の処理でその内容を利用できます。
- **複雑なスクリプト**: 複数のコマンドを含む複雑なスクリプトを使用する場合、`catch`を利用して全体を守ることが重要です。
- **ネストされたキャッチ**: 「catch」をネストすることも可能ですが、エラーハンドリングのロジックが複雑になる可能性があるため注意が必要です。

## 一文まとめ
Tclの「catch」コマンドは、スクリプトのエラーを捕捉し、エラーハンドリングを効果的に行うための重要な機能です。